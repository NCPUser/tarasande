package net.tarasandedevelopment.tarasande.features.module.exploit

import net.minecraft.client.MinecraftClient
import net.minecraft.client.gui.screen.ingame.InventoryScreen
import net.minecraft.screen.slot.SlotActionType
import net.tarasandedevelopment.tarasande.base.features.module.Module
import net.tarasandedevelopment.tarasande.base.features.module.ModuleCategory
import net.tarasandedevelopment.tarasande.util.exploit.ExploitInjector

class ModuleCraftingDupe : Module("Crafting dupe", "Duplicate items using crafting grids on 1.17.0", ModuleCategory.EXPLOIT) {

    init {
        ExploitInjector.hook(InventoryScreen::class.java, "Crafting Dupe 1.17.0", object : ExploitInjector.Action {
            override fun on() {
                val inventoryScreen = MinecraftClient.getInstance().currentScreen!! as InventoryScreen
                val outputSlot = inventoryScreen.screenHandler.getSlot(0)

                inventoryScreen.onMouseClick(outputSlot, outputSlot.id, 0, SlotActionType.THROW)
            }
        }, this)
    }
}