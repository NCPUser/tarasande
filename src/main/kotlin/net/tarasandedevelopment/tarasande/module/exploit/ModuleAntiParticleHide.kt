package net.tarasandedevelopment.tarasande.module.exploit

import net.tarasandedevelopment.tarasande.base.event.Event
import net.tarasandedevelopment.tarasande.base.module.Module
import net.tarasandedevelopment.tarasande.base.module.ModuleCategory
import net.tarasandedevelopment.tarasande.event.EventEntityStatusGUI
import net.tarasandedevelopment.tarasande.value.ValueBoolean
import java.util.function.Consumer

class ModuleAntiParticleHide : Module("Anti particle hide", "Makes invisible effects visible", ModuleCategory.EXPLOIT) {

    private val inventory = ValueBoolean(this, "Inventory", true)
    private val hud = ValueBoolean(this, "HUD", true)
    
    val eventConsumer = Consumer<Event> {
        if (it is EventEntityStatusGUI) {
            if (hud.value && it.type == EventEntityStatusGUI.Type.ICON) it.state = true
            if (inventory.value && it.type == EventEntityStatusGUI.Type.PARTICLES) it.state = true

            it.cancelled = true
        }
    }
}
